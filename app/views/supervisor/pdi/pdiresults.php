<!-- ADD COMMON HEADER FILE -->
<?php require_once APP_ROOT . '/views/supervisor/includes/header.php'; ?>

<!-- ADD LEFT NAVIGATION BAR AND TOP NAVIGATION BAR -->
<?php require_once APP_ROOT . '/views/supervisor/common/leftnavbar.php'; ?>
<?php require_once APP_ROOT . '/views/supervisor/common/topnavbar.php'; ?>


<!-- <section>
    <div class="pdi-result-fullboard">
        <div class="pdi-result-databoard">


            <div class="vehicle-detail-section">
                <div class="pdi-result-main">
                    <div class="pdi-page-heading">PDI Results</div>
                    <div class="pdi-vehicle-selection">
                        <div>
                            <label for="vehicles"></label>
                            <select class="pdi-vehicles" name="vehicles" id="vehicles">
                                <option value="NULL">Select vehicle</option>
                                <option value="CN1294B0934">CN1294B0934</option>
                                <option value="CN1294G0836">CN1294G0836</option>
                                <option value="CN1294L9302">CN1294L9302</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="vehicle-details">
                    <div class="pdi-vin">VIN : CN112218811A</div>
                    <div class="pdi-eng">Engine : EN562VD59J5N37</div>
                </div>
            </div>

            <div class="pdi-result-section">
                <div class="pdi-data-board">

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pdicard">
                        <div class="pdi-card-head">
                            <div class="pdi-card-main">Before Starting PDI</div>
                            <div class="pdi-card-sub">None</div>
                        </div>
                        <div class="pdiresultbox">
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                            <div class="pdi-checklist">
                                <div class="pdi-checking">Check 01</div>
                                <div class="pdi-checking-result">
                                    <div class="pdi-checking-result-text">OK</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section> -->




    <section class="position-absolute page-content">
        <div class="display-flex-row margin-bottom-3 align-items-center justify-content-between margin-right-6 margin-bottom-4">
            <div class="page-heading font-weight">
                PDI Results
            </div>
            <div class="custom-select">
                <select name="vehicles" class="background-none" id="pdiVehicles">
                    <?php 
                        echo '<option value="' . URL_ROOT . 'managers/pdi/' . $data['ChassisNo'] .'">'.$data['ChassisNo'].'</option>';
                        foreach($data['onPDIVehicles'] as $value) {
                            if ($value->ChassisNo == $data['ChassisNo']) {
                                continue;
                            }
                            echo '<option value="' . URL_ROOT . 'managers/pdi/' . $value->ChassisNo . '">'.$value->ChassisNo.'</option>';
                        }
                    ?>
                </select>
            </div>
        </div>

        <div class="display-flex-row justify-content-between">
            <div>
                <div class="paddingy-2 font-weight">VIN : <?php echo $data['onPDIVehicle']->ChassisNo ?></div>
                <div class="paddingy-2 font-weight">Engine : <?php echo $data['onPDIVehicle']->EngineNo ?></div>
                <div class="paddingy-2 font-weight">Tester : <?php echo $data['onPDIVehicle']->Tester ?></div>
            </div>
            <div>
                <button class="btn btn-primary btn-blue width-rem-12" id="view-defect">View Defect Sheet</button>
            </div>
        </div>


        <div class="display-flex-row justify-content-start gap-2 margin-top-3 flex-wrap padding-bottom-5">

        <?php 
                foreach ($data['pdiCheckCategories'] as $value) {
                    echo '
                        <div class="pdi-card">
                            <div class="pdi-card-head">
                                <div class="pdi-card-main">'.$value->Title.'</div>
                                <div class="pdi-card-sub">'.$value->SubTitle.'</div>

                                <div class="pdiresultbox paddingy-3">
                    ';

                    foreach ($data['pdiCheckList'] as $value2) {
                        if ($value2->CategoryId == $value->CategoryId) {

                            if ($value2->Result == 'OK') {
                                $color = 'green-box';
                            } else if ($value2->Result == 'S/A') {
                                $color = 'red-box';
                            } else {
                                $color = 'yellow-box';
                            }

                            echo '
                                <div class="paddingx-4 paddingy-2">
                                    <div class="pdi-checklist">
                                        <div class="padding-bottom-3 font-size">'.$value2->CheckName.'</div>
                                        <div class="pdi-checking-result '. $color .'">
                                            <div class="pdi-checking-result-text">'.$value2->Result.'</div>
                                        </div>
                                    </div>
                                </div>
                            ';
                        }
                    }

                    echo '
                                </div>
                            </div>
                        </div>
                    ';
                }
            ?>

        </div>
    </section>

    <div class="overlay display-flex-row align-items-center justify-content-center" id="overlay">
        <section id="pop-con" class="overflow-defects border-gray">
        <div class="column align-items-center border-gray padding-5 justify-content-center">
        <div class="page-heading font-weight  margin-bottom-4">
            Defect Sheet
        </div>
            <table class="ds-table">
                <tbody>
                    <tr>
                        <th>Defect No.</th>
                        <th>Defect Description</th>
                        <th>Inspection Date</th>
                        <th>Employee ID</th>
                        <th>Recorrection</th>
                    </tr>

                    <?php
                    if (empty($data['defects'])) {
                        echo "<tr><td colspan='7'>No Defects Found</td></tr>";
                    } else {
                        foreach ($data['defects'] as $values) :
                    ?>

                            <tr>
                                <td><?php echo $values->DefectNo; ?></td>
                                <td><?php echo $values->RepairDescription; ?></td>
                                <td><?php echo $values->InspectionDate; ?></td>
                                <td><?php echo $values->EmployeeID; ?></td>
                                <td><?php echo $values->ReCorrection; ?></td>
                            </tr>

                        <?php endforeach; ?>
                    <?php } ?>

                </tbody>
            </table>

            <div class="text-center text-blue font-size-14 margin-top-4 pointer" id="cancel">Cancel</div>
        </div>
        </section>
    </div>

    <script type="module" src="<?php echo URL_ROOT; ?>public/javascripts/managerjs/main.js"></script>
    <script type="text/javascript" src="<?php echo URL_ROOT; ?>public/javascripts/managerjs/cors.js"></script>
    <script type="text/javascript" src="<?php echo URL_ROOT; ?>public/javascripts/managerjs/pdi.js"></script>




<!-- ADD COMMON FOOTER FILE -->
<?php require_once APP_ROOT . '/views/supervisor/includes/footer.php'; ?>